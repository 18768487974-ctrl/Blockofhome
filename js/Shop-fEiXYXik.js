import{r as e,b as a,d as l,y as t,w as s,c as i,h as o,f as r,g as n,p as c,v as d,F as u,k as v,i as g,j as p,m,q as h,t as w,n as b,o as f}from"./vue-vendor-BMkgI9aZ.js";import{_ as y,U as C,F as x}from"./ui-components-C5SM5cLk.js";const k={class:"shop-page"},L={class:"shop-nav"},B={class:"search-container"},A={class:"search-wrapper"},M={key:0,class:"search-suggestions"},_=["onClick"],T={class:"suggestion-title"},H={class:"suggestion-category"},V={class:"user-section"},$={class:"category-filter"},z=["onClick"],I={class:"container"},O={class:"products-grid",id:"productsGrid"},U=["data-id","onClick"],Z={class:"product-image"},j=["srcset"],q=["src","alt"],G={class:"product-content"},D={class:"product-category"},F={class:"product-title"},S={class:"product-description"},E={class:"product-price"},P=["onClick"],R={key:0,class:"no-products"},W={class:"boh-form-group"},K={class:"boh-form-group"},N={class:"boh-password-wrap"},Y=["type"],J={key:0,class:"boh-auth-error"},Q={class:"boh-form-links"},X=["disabled"],ee={class:"modal-body-layout"},ae={class:"modal-image-side"},le=["src","alt"],te={class:"modal-info-side"},se={class:"modal-category"},ie={class:"modal-title"},oe={class:"modal-price"},re={class:"modal-description"},ne={class:"modal-actions"},ce=y({__name:"Shop",setup(y){const ce=e([{id:8,category:"周边",title:"BOH BAG-Air（胸包）",description:"白色背景图+黑色文字，黑色文字为BOH BAG系列",price:"¥39.99",image:"data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' width='300' height='200' viewBox='0 0 300 200'><rect width='300' height='200' fill='white'/><text x='50%' y='50%' font-family='Arial' font-size='24' font-weight='bold' fill='black' text-anchor='middle' dominant-baseline='middle'>BOH BAG Series</text></svg>"},{id:1,category:"周边",title:"方块之家7周年纪念册",description:"硬壳精装版，记录方块之家7年来的点点滴滴。",price:"¥34.99",image:"/assets/images/Commemorative-album.PNG"},{id:2,category:"周边",title:"方块之家明信片套装",description:"8张精美明信片，展示方块之家建筑风光。",price:"¥8.99",image:"/assets/images/2025-7years.png"},{id:3,category:"周边",title:"方块之家7周年海报",description:"高品质印刷，记录7周年美好瞬间。",price:"¥12.99",image:"/assets/images/2024-newyears.png"},{id:4,category:"礼物",title:"小牛定制吧唧",description:"金属吧唧，小牛形象设计。",price:"¥6.99",image:"/assets/images/main3.png"},{id:5,category:"定制",title:"小牛定制流麻",description:"动态流沙麻将，blingbling效果。",price:"待定",image:"/assets/images/main2.webp"},{id:6,category:"礼物",title:"方块之家钥匙扣",description:"精致钥匙扣，多种款式可选。",price:"¥5.99",image:"data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' width='300' height='200' viewBox='0 0 300 200'><rect width='300' height='200' fill='white'/><text x='50%' y='50%' font-family='Arial' font-size='24' font-weight='bold' fill='black' text-anchor='middle' dominant-baseline='middle'>BlockOfHome Keychain</text></svg>"},{id:7,category:"定制",title:"像素乐高形象109",description:"根据您的设计定制专属像素乐高形象。",price:"¥199.99",image:"data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' width='300' height='200' viewBox='0 0 300 200'><rect width='300' height='200' fill='white'/><text x='50%' y='50%' font-family='Arial' font-size='24' font-weight='bold' fill='black' text-anchor='middle' dominant-baseline='middle'>Pixel Lego Figure 109</text></svg>"}]),de=e(""),ue=e(!1),ve=e([]);let ge=null;const pe=e(!1),me=e(!1),he=e(!1),we=e(!1),be=e({username:"",password:""}),fe=e(!1),ye=e(""),Ce=()=>{const{username:e,password:a}=be.value;we.value=!1,!e.trim()||!a.trim()||a.length<6||(he.value=!0,setTimeout(()=>{window.AuthManager.login(e,a).success?(fe.value=!0,ye.value=e,pe.value=!1,be.value={username:"",password:""}):we.value=!0,he.value=!1},500))},xe=()=>{alert("由于技术限制，请联系网站开发者解决该问题。")},ke=e([{label:"全部",value:""},{label:"礼物",value:"礼物"},{label:"周边",value:"周边"},{label:"定制",value:"定制"}]),Le=e(""),Be=a(()=>fe.value?{id:ye.value.toLowerCase().replace(/\s+/g,"-")+"-"+Math.floor(1e4*Math.random()),username:ye.value}:{id:"guest-12345",username:"guest"}),Ae=e=>{fe.value||(e.preventDefault(),pe.value=!0)},Me=a(()=>fe.value?"/user-center/address":"#"),_e=e=>{const a=`${Be.value.username}在BOH官网选择了${e.category}${e.title}\n查看链接：${window.location.origin}${window.location.pathname}?productId=${e.id}`;navigator.clipboard.writeText(a).then(()=>{alert("分享内容已复制到剪贴板")}).catch(e=>{alert(a)})},Te=a(()=>{let e=[...ce.value];if(Le.value&&(e=e.filter(e=>e.category===Le.value)),de.value){const a=de.value.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(a)||e.description.toLowerCase().includes(a))}return e}),He=e=>{const a=e.target.value.toLowerCase();a.length>0?(ge&&clearTimeout(ge),ge=setTimeout(()=>{ve.value=ce.value.filter(e=>e.title.toLowerCase().includes(a)||e.description.toLowerCase().includes(a)),ue.value=!0},300)):(ue.value=!1,ve.value=[])},Ve=e(null),$e=()=>{Ve.value=null,document.body.style.overflow=""},ze=e([]);let Ie=null;const Oe=()=>{Ie&&Ie.disconnect(),Ie=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("visible")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"}),ze.value&&ze.value.forEach(e=>{e&&Ie.observe(e)})};return l(()=>{(()=>{if(window.AuthManager){const e=window.AuthManager.getCurrentUser();e?(fe.value=!0,ye.value=e.username):(fe.value=!1,ye.value="")}})(),document.body.classList.add("is-loaded"),Oe()}),t(()=>{Ie&&Ie.disconnect(),ge&&clearTimeout(ge)}),s(()=>Te.value.length,()=>{setTimeout(()=>{Oe()},100)}),t(()=>{Ie&&Ie.disconnect(),ge&&clearTimeout(ge)}),(e,a)=>{const l=p("router-link");return f(),i("div",k,[o(C),a[17]||(a[17]=r("header",{class:"page-header"},[r("h1",{class:"page-title"},"周边商城"),r("p",{class:"page-subtitle"},"方块之家官方周边，尽在方块街")],-1)),r("div",L,[r("div",B,[r("div",A,[c(r("input",{type:"text",class:"search-input","onUpdate:modelValue":a[0]||(a[0]=e=>de.value=e),placeholder:"搜索商品...",onInput:He},null,544),[[d,de.value]]),a[9]||(a[9]=r("button",{class:"search-btn"},[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z",fill:"currentColor"})])],-1)),ue.value&&ve.value.length>0?(f(),i("div",M,[(f(!0),i(u,null,v(ve.value,e=>(f(),i("div",{key:e.id,class:"suggestion-item",onClick:a=>(e=>{de.value=e.title,ue.value=!1})(e)},[r("span",T,w(e.title),1),r("span",H,w(e.category),1)],8,_))),128))])):n("",!0)])]),r("div",V,[o(l,{to:Me.value,class:"user-btn",onClick:Ae},{default:g(()=>[...a[10]||(a[10]=[r("span",{class:"user-icon"},[r("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z",fill:"currentColor"})])],-1),r("span",null,"我的",-1)])]),_:1},8,["to"])])]),r("div",$,[(f(!0),i(u,null,v(ke.value,e=>(f(),i("div",{key:e.value,class:b(["category-item",{active:Le.value===e.value}]),onClick:a=>(e=>{Le.value=e})(e.value)},w(e.label),11,z))),128))]),r("div",I,[r("div",O,[(f(!0),i(u,null,v(Te.value,(e,a)=>{return f(),i("div",{key:e.id,class:"product-card","data-id":e.id,ref_for:!0,ref_key:"productCards",ref:ze,onClick:a=>(e=>{Ve.value=e,document.body.style.overflow="hidden"})(e)},[r("div",Z,[r("picture",null,[r("source",{srcset:(l=e.image,!l||l.startsWith("data:")?l:l.replace(/\.(png|jpg|jpeg)$/i,".webp")),type:"image/webp"},null,8,j),r("img",{src:e.image,alt:e.title,loading:"lazy",decoding:"async",fetchpriority:"low",sizes:"(max-width: 768px) 50vw, (max-width: 1200px) 33vw, 25vw"},null,8,q)])]),r("div",G,[r("span",D,w(e.category),1),r("h3",F,w(e.title),1),r("p",S,w(e.description),1),r("div",E,w(e.price),1),r("button",{class:"product-btn",onClick:a=>_e(e)}," 获取周边 ",8,P)])],8,U);var l}),128)),0===Te.value.length?(f(),i("div",R,[...a[11]||(a[11]=[r("p",null,"暂无匹配的商品",-1)])])):n("",!0)])]),o(x),pe.value?(f(),i("div",{key:0,class:"boh-login-modal-overlay",onClick:a[6]||(a[6]=e=>pe.value=!1)},[r("div",{class:"boh-login-modal-container",onClick:a[5]||(a[5]=m(()=>{},["stop"]))},[r("button",{class:"boh-login-modal-close",onClick:a[1]||(a[1]=e=>pe.value=!1)}," × "),a[15]||(a[15]=r("div",{class:"boh-login-modal-header"},[r("h2",null,"方块之家"),r("p",null,"这里不只有方块。")],-1)),r("form",{class:"boh-login-form",onSubmit:m(Ce,["prevent"])},[r("div",W,[a[12]||(a[12]=r("label",null,"方块ID",-1)),c(r("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>be.value.username=e),placeholder:"请输入你的用户名",required:""},null,512),[[d,be.value.username]])]),r("div",K,[a[13]||(a[13]=r("label",null,"密码",-1)),r("div",N,[c(r("input",{type:me.value?"text":"password","onUpdate:modelValue":a[3]||(a[3]=e=>be.value.password=e),placeholder:"请输入你的密码",required:""},null,8,Y),[[h,be.value.password]]),r("button",{type:"button",class:"boh-toggle-password",onClick:a[4]||(a[4]=e=>me.value=!me.value)},w(me.value?"隐藏":"显示"),1)])]),we.value?(f(),i("div",J," 用户名或密码错误，请重试 ")):n("",!0),r("div",Q,[r("a",{href:"#",class:"boh-forgot-password",onClick:m(xe,["prevent"])},"忘记密码？"),a[14]||(a[14]=r("a",{href:"https://docs.qq.com/form/page/DRVZ2TmtwZWRYaU5o",class:"boh-register-link",target:"_blank"},"还没有账号？立即注册",-1))]),r("button",{type:"submit",class:"boh-login-btn",disabled:he.value},w(he.value?"登录中...":"登录方块之家"),9,X)],32)])])):n("",!0),Ve.value?(f(),i("div",{key:1,class:b(["product-modal-overlay",{"is-active":Ve.value}]),onClick:$e},[r("div",{class:"product-modal-container",onClick:a[8]||(a[8]=m(()=>{},["stop"]))},[r("button",{class:"modal-close-btn",onClick:$e},"×"),r("div",ee,[r("div",ae,[r("img",{src:Ve.value.image,alt:Ve.value.title,loading:"lazy"},null,8,le)]),r("div",te,[r("span",se,w(Ve.value.category),1),r("h2",ie,w(Ve.value.title),1),r("div",oe,w(Ve.value.price),1),a[16]||(a[16]=r("div",{class:"modal-divider"},null,-1)),r("p",re,w(Ve.value.description),1),r("div",ne,[r("button",{class:"modal-primary-btn",onClick:a[7]||(a[7]=e=>_e(Ve.value))},"获取此周边")])])])])],2)):n("",!0)])}}},[["__scopeId","data-v-feb2af61"]]);export{ce as default};
